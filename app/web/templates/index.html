<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bahá'í Life Coach</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Hamburger menu for mobile -->
        <div class="hamburger-menu">
            <button id="sidebar-toggle-btn">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>Settings</h2>
                <button class="close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Google Integration -->
            <div class="sidebar-section">
                <h3>Google Integration</h3>
                <div class="toggle-container">
                    <label class="toggle-switch">
                        <input type="checkbox" id="google-toggle" {% if google_enabled %}checked{% endif %}>
                        <span class="toggle-slider"></span>
                    </label>
                    <span class="toggle-label">Enable Google Integration</span>
                </div>
                <div class="integration-badge {% if google_enabled %}enabled{% else %}disabled{% endif %}" id="google-status">
                    Google Integration: {% if google_enabled %}Enabled{% else %}Disabled{% endif %}
                </div>
                <div class="google-actions" {% if not google_enabled %}style="display: none;"{% endif %}>
                    <p>With Google Integration enabled, I can:</p>
                    <ul>
                        <li>Access your calendar events</li>
                        <li>Create and manage tasks in Google Tasks</li>
                    </ul>
                </div>
            </div>

            <!-- Speech Settings -->
            <div class="sidebar-section">
                <h3>Speech Settings</h3>
                <div class="toggle-container">
                    <label class="toggle-switch">
                        <input type="checkbox" id="speech-toggle" {% if speech_enabled %}checked{% endif %}>
                        <span class="toggle-slider"></span>
                    </label>
                    <span class="toggle-label">Enable Speech</span>
                </div>
                <div class="speech-settings" {% if not speech_enabled %}style="display: none;"{% endif %}>
                    <div class="setting-row">
                        <label for="rate">Rate:</label>
                        <input type="range" id="rate" min="0.5" max="2" step="0.1" value="{{ speech_rate }}">
                        <span id="rate-value">{{ speech_rate }}</span>
                    </div>
                    <div class="setting-row">
                        <label for="pitch">Pitch:</label>
                        <input type="range" id="pitch" min="0.5" max="2" step="0.1" value="{{ speech_pitch }}">
                        <span id="pitch-value">{{ speech_pitch }}</span>
                    </div>
                </div>
            </div>

            <!-- Insights Panel -->
            <div class="sidebar-section">
                <h3>Insights</h3>
                <div class="insights-panel">
                    <div id="insights-content">
                        <p>No insights available yet. Continue your conversation to generate insights.</p>
                    </div>
                </div>
            </div>

            <!-- Memory Panel -->
            <div class="sidebar-section">
                <h3>Memory</h3>
                <div class="memory-panel">
                    <div class="memory-search">
                        <input type="text" id="memory-search-input" placeholder="Search memories...">
                        <button id="memory-search-btn"><i class="fas fa-search"></i></button>
                    </div>
                    <div class="memories-list" id="memories-content">
                        <p>No memories available yet.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Container -->
        <div class="chat-container">
            <header>
                <h1>Bahá'í Life Coach</h1>
                <p>Guided by Bahá'í principles to help you achieve your highest potential</p>
                <div class="header-buttons">
                    <button id="new-chat-btn">
                        <i class="fas fa-plus"></i> New Chat
                    </button>
                    <button id="voice-toggle" class="toggle-btn">
                        <i class="fas fa-microphone"></i>
                    </button>
                </div>
            </header>

            <div class="chat-messages" id="chat-messages">
                <div class="message assistant">
                    <div class="message-content">
                        <p>Hello! I'm your Bahá'í Life Coach. I'm here to help you reflect on your life and goals through the lens of Bahá'í principles such as unity, justice, equality, and service to humanity.</p>
                        <p>How can I assist you today?</p>
                    </div>
                </div>
            </div>

            <div class="voice-indicator hidden" id="voice-indicator">
                <div class="voice-pulse"></div>
                <span>Listening...</span>
            </div>

            <div class="chat-input-container">
                <textarea id="message-input" placeholder="Type your message here..." rows="1"></textarea>
                <button id="send-btn">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay hidden" id="loading-overlay">
        <div class="loader"></div>
        <p>Processing your request...</p>
    </div>

    <!-- JavaScript -->
    <script>
        // Configuration from server
        const googleEnabled = {% if google_enabled %}true{% else %}false{% endif %};
        const speechEnabled = {% if speech_enabled %}true{% else %}false{% endif %};
        const speechRate = {{ speech_rate }};
        const speechPitch = {{ speech_pitch }};
        const speechPauseThreshold = {{ speech_pause_threshold }};
    </script>
    <script src="{{ url_for('static', filename='js/speech.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html> 